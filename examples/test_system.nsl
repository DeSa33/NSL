# Test new system commands
print("=== Testing System Commands ===")

# Test timestamp
print("\n1. Testing timestamp():")
let ts = timestamp()
print("Unix timestamp:", ts)

# Test now()
print("\n2. Testing now():")
print("Current time (ISO):", now())
print("Current time (custom):", now("yyyy-MM-dd HH:mm:ss"))

# Test environment variables
print("\n3. Testing env():")
print("PATH exists:", len(env("PATH")) > 0)
print("USERNAME:", env("USERNAME"))

# Test set_env
print("\n4. Testing set_env():")
set_env("NSL_TEST_VAR", "Hello from NSL!")
print("NSL_TEST_VAR:", env("NSL_TEST_VAR"))

# Test powershell()
print("\n5. Testing powershell():")
let ps_result = powershell("Write-Output 'Hello from PowerShell!'")
print("PS Output:", ps_result["output"])
print("PS Success:", ps_result["success"])

# Test Get-Process via PowerShell
print("\n6. Testing PowerShell Get-Process:")
let proc_result = powershell("Get-Process | Select-Object -First 3 | Format-Table Name, Id -AutoSize")
print(proc_result["output"])

# Test sleep (short delay)
print("\n7. Testing sleep():")
print("Sleeping for 100ms...")
sleep(100)
print("Done!")

print("\n=== All System Tests Complete ===")
